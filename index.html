<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- SEO Meta Tags -->
  <title>RNI - Red de AnÃ©cdotas de Infidelidad | AnÃ³nimo y Seguro</title>
  <meta name="description"
    content="Registro Nacional de Infieles (RNI) - Plataforma comunitaria para documentar y verificar casos de infidelidad. Consulta registros, vota y comparte pruebas de manera anÃ³nima.">
  <meta name="keywords"
    content="registro infieles, infidelidad, base de datos, comunidad, verificaciÃ³n, pruebas, votaciÃ³n comunitaria">
  <meta name="author" content="RNI">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://registronacionaldeinfieles.netlify.app/">

  <!-- Open Graph / Facebook / WhatsApp -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://registronacionaldeinfieles.netlify.app/">
  <meta property="og:title" content="RNI - Registro Nacional de Infieles">
  <meta property="og:description"
    content="Plataforma comunitaria para documentar y verificar casos de infidelidad. Consulta registros, vota y comparte pruebas de manera anÃ³nima.">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:site_name" content="RNI">
  <meta property="og:locale" content="es_ES">


  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="/assets/favicon.svg">
  <link rel="apple-touch-icon" href="/assets/apple-touch-icon.png">

  <!-- PWA Manifest -->
  <link rel="manifest" href="/manifest.json">

  <!-- Theme Color -->
  <meta name="theme-color" content="#f8b4d9">
  <meta name="msapplication-TileColor" content="#f8b4d9">

  <!-- Stylesheets -->
  <link rel="stylesheet" href="/css/base.css">
  <link rel="stylesheet" href="/css/components.css">
  <link rel="stylesheet" href="/css/responsive.css">
  <link rel="stylesheet" href="/css/image-uploader.css">
  <link rel="stylesheet" href="/css/filters.css">
  <link rel="stylesheet" href="/css/ads.css?v=3">
  <link rel="stylesheet" href="/css/migration-popup.css">

  <!-- Structured Data (JSON-LD) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "RNI - Registro Nacional de Infieles",
    "description": "Plataforma comunitaria para documentar y verificar casos de infidelidad. Consulta registros, vota y comparte pruebas de manera anÃ³nima.",
    "url": "https://tudominio.com",
    "applicationCategory": "SocialNetworkingApplication",
    "operatingSystem": "Web",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    },
    "aggregateRating": {
      "@type": "AggregateRating",
      "ratingValue": "4.5",
      "ratingCount": "1000"
    },
    "inLanguage": "es"
  }
  </script>
</head>

<body>
  <!-- Popup de MigraciÃ³n -->
  <div id="migration-overlay" class="migration-overlay">
    <div class="migration-popup">
      <div class="migration-header">
        <button class="migration-close" onclick="closeMigrationPopup()">&times;</button>
        <h2>Nos Estamos Mudando</h2>
        <p>Mejorando tu experiencia en RNI</p>
      </div>

      <div class="migration-body">
        <div class="migration-section">
          <h3>Importante: Cambios en el Servicio</h3>
          <p>
            Debido a ataques y saturaciÃ³n del servidor, hemos preparado una nueva versiÃ³n mÃ¡s robusta.
            <strong>Esta versiÃ³n no recibirÃ¡ mÃ¡s soporte</strong>, pero permanecerÃ¡ disponible.
          </p>
        </div>

        <div class="migration-advantages">
          <h4>Ventajas del Nuevo Servidor (Solo PC)</h4>
          <ul class="advantage-list">
            <li>Mucho mÃ¡s rÃ¡pido en carga y respuesta</li>
            <li>MÃ¡s registros disponibles y actualizados</li>
            <li>Mayor protecciÃ³n contra ataques</li>
            <li>Soporte tÃ©cnico y actualizaciones continuas</li>
          </ul>
        </div>

        <div class="migration-warning">
          <h4>Tu navegador dirÃ¡ "No es seguro"</h4>
          <p>
            No tiene certificado HTTPS. Haz click en "Continuar al sitio" o "Avanzado" y luego "Continuar".
          </p>
        </div>

        <div class="migration-security">
          <h4>Es seguro porque:</h4>
          <ul class="security-list">
            <li>No hay cuentas ni login</li>
            <li>No pedimos datos personales</li>
            <li>Todo es anÃ³nimo y pÃºblico</li>
          </ul>
        </div>

        <div class="migration-actions">
          <a href="http://coquettecraft.duckdns.org:3050/" class="migration-btn migration-btn-primary" target="_blank"
            rel="noopener noreferrer">
            Ir al Nuevo Servidor (Solo PC)
          </a>
          <button class="migration-btn migration-btn-secondary" onclick="closeMigrationPopup()">
            Quedarme AquÃ­
          </button>
        </div>

        <div class="migration-note">
          Esta versiÃ³n seguirÃ¡ funcionando pero sin actualizaciones. No serÃ¡ eliminada.
        </div>
      </div>
    </div>
  </div>

  <!-- Loading Screen -->
  <div id="loading-overlay" class="loading-overlay">
    <div class="loading-content">
      <div class="loading-spinner"></div>
      <div class="loading-text">Cargando RNI</div>
      <div class="loading-subtext">Preparando tus datos...</div>
    </div>
  </div>

  <div id="toast-container"></div>

  <header class="header">
    <div class="container">
      <div class="header-content">
        <div class="logo-section">
          <img src="/assets/logo.svg" alt="RNI Logo" class="logo-icon">
          <div>
            <h1 class="logo">RNI</h1>
            <p class="tagline">Red de AnÃ©cdotas de Infidelidad</p>
          </div>
        </div>

        <div class="header-nav">
          <button class="btn-nav active">
            ğŸ“‹ Lista Negra
          </button>
          <button onclick="window.location.href='/discover.html'" class="btn-nav">
            ğŸ”¥ Descubrir
          </button>
        </div>

        <div class="country-selector">
          <span class="country-label">PaÃ­s:</span>
          <select id="country-select" class="elegant-select">
            <option value="PE">ğŸ‡µğŸ‡ª PerÃº</option>
            <option value="MX">ğŸ‡²ğŸ‡½ MÃ©xico</option>
            <option value="CO">ğŸ‡¨ğŸ‡´ Colombia</option>
            <option value="AR">ğŸ‡¦ğŸ‡· Argentina</option>
            <option value="CL">ğŸ‡¨ğŸ‡± Chile</option>
            <option value="ES">ğŸ‡ªğŸ‡¸ EspaÃ±a</option>
            <option value="VE">ï¿½ğŸ‡ª Venezuelai</option>
            <option value="EC">ï¿½ï¿½ BrEcuador</option>
            <option value="BO">ï¿½ï¿½ Bolizuvia</option>
            <option value="PY">ï¿½ğŸ‡¾ Paragruay</option>
            <option value="UY">ğŸ‡ºğŸ‡¾ Uruguay</option>
            <option value="CR">ğŸ‡¨ğŸ‡· Costa Rica</option>
            <option value="PA">ğŸ‡µğŸ‡¦ PanamÃ¡</option>
            <option value="GT">ğŸ‡¬ğŸ‡¹ Guatemala</option>
            <option value="HN">ğŸ‡­ğŸ‡³ Honduras</option>
            <option value="SV">ğŸ‡¸ğŸ‡» El Salvador</option>
            <option value="NI">ğŸ‡³ğŸ‡® Nicaragua</option>
            <option value="DO">ğŸ‡©ğŸ‡´ RepÃºblica Dominicana</option>
            <option value="CU">ğŸ‡¨ğŸ‡º Cuba</option>
            <option value="PR">ğŸ‡µğŸ‡· Puerto Rico</option>
          </select>
        </div>
      </div>
    </div>
  </header>

  <main class="ads-layout">
    <!-- Sidebar izquierdo de publicidad -->
    <aside class="ads-sidebar left" id="ads-left">
      <!-- Los anuncios se cargan dinÃ¡micamente con JavaScript -->
    </aside>

    <!-- Contenido principal -->
    <div class="main-content-with-ads">
      <!-- Mensaje de bienvenida -->
      <div class="warning-card"
        style="background: linear-gradient(135deg, rgba(248, 180, 217, 0.1), rgba(248, 180, 217, 0.05)); border-left: 4px solid var(--primary-pink);">
        <div class="warning-card-content">
          <div class="warning-card-icon"
            style="background: linear-gradient(135deg, var(--primary-pink), var(--dark-pink)); color: white;">ğŸ’¡</div>
          <div class="warning-card-body">
            <h3 class="warning-card-title" style="color: var(--primary-pink); cursor: pointer;"
              onclick="this.nextElementSibling.style.display = this.nextElementSibling.style.display === 'none' ? 'block' : 'none'">
              ğŸš€ Â¿Quieres que la pÃ¡gina vaya mÃ¡s rÃ¡pida? (Click para cerrar)
            </h3>
            <p class="warning-card-text" style="color: var(--elegant-black); display: block; margin: 10px 0 0 0;">
              Tenemos un <strong>servidor de respaldo mÃ¡s rÃ¡pido con mÃ¡s datos</strong>:
              <br><br>
              ğŸ‘‰ <strong><a href="http://coquettecraft.duckdns.org:3050/" target="_blank" rel="noopener noreferrer"
                  style="color: var(--dark-pink); text-decoration: underline; font-size: 1.1em;">Ir al servidor
                  rÃ¡pido</a></strong>
              <br><br>
              <strong style="color: var(--primary-pink);">âœ¨ Ventajas:</strong>
              <br>
              â€¢ âš¡ Mucho mÃ¡s rÃ¡pido
              <br>
              â€¢ ğŸ“Š MÃ¡s registros disponibles
              <br>
              â€¢ ğŸ”„ SincronizaciÃ³n mÃ¡s frecuente
              <br><br>
              <strong style="color: #ff9800;">âš ï¸ Tu navegador dirÃ¡ "No es seguro"</strong> porque no tiene HTTPS.
              <br><br>
              <strong style="color: var(--primary-pink);">âœ… Pero es seguro porque:</strong>
              <br>
              â€¢ No hay cuentas ni login
              <br>
              â€¢ No pedimos datos personales
              <br>
              â€¢ Todo es anÃ³nimo y pÃºblico
              <br><br>
              Solo haz click en <strong>"Continuar al sitio"</strong> cuando aparezca la advertencia.
              <br><br>
              <small style="color: #666;">Si prefieres quedarte aquÃ­, estÃ¡ bien.</small>
              <br><br>
              <strong style="color: var(--primary-pink);">ğŸ”’ Privacidad:</strong> Sitio de anÃ©cdotas anÃ³nimas. Los
              usuarios son responsables del contenido. No verificamos identidades ni recopilamos datos personales.
            </p>
          </div>
        </div>
      </div>

      <div class="actions-bar">
        <button id="btn-new-record" class="btn-primary">
          <span class="icon">ğŸ’”</span>
          <span class="btn-text">Nuevo Infiel</span>
        </button>
        <button id="btn-sync" class="btn-secondary">
          <span class="icon">ğŸ”„</span>
          <span class="btn-text">Sincronizar</span>
        </button>
        <button id="btn-toggle-filters" class="btn-secondary">
          <span class="icon" id="filter-toggle-icon">ğŸ”½</span>
          <span class="btn-text">Filtros</span>
        </button>
      </div>

      <!-- Barra de bÃºsqueda (siempre visible) -->
      <div class="search-bar" style="margin-bottom: 20px;">
        <span class="search-icon">ğŸ”</span>
        <input type="text" id="search-input" class="search-input"
          placeholder="Buscar por nombre, apellido, ubicaciÃ³n...">
        <button id="btn-clear-search" class="btn-clear-search" style="display: none;">âœ•</button>
      </div>

      <!-- Filtros (colapsables) -->
      <div class="search-filter-container collapsed">

        <!-- Botones de modo de filtro -->
        <div class="filter-mode-buttons">
          <button id="btn-simple-filters" class="filter-mode-btn active">
            <span class="icon">âš¡</span> Filtros Simples
          </button>
          <button id="btn-advanced-filters" class="filter-mode-btn">
            <span class="icon">ğŸ¯</span> Filtros Avanzados
          </button>
          <button id="btn-clear-filters" class="btn-clear-all">
            <span class="icon">ğŸ—‘ï¸</span> Limpiar Todo
          </button>
        </div>

        <!-- Filtros Simples -->
        <div id="simple-filters" class="filters-panel active">
          <div class="filters-grid">
            <div class="filter-group">
              <label>Estado del Caso</label>
              <select id="filter-status" class="filter-select">
                <option value="">Todos</option>
                <option value="approved">Aprobado</option>
                <option value="rejected">Refutado</option>
                <option value="mixed">Variado</option>
                <option value="pending">Pendiente</option>
              </select>
            </div>

            <div class="filter-group">
              <label>Edad</label>
              <select id="filter-age" class="filter-select">
                <option value="">Todas</option>
                <option value="18-25">18-25 aÃ±os</option>
                <option value="26-35">26-35 aÃ±os</option>
                <option value="36-45">36-45 aÃ±os</option>
                <option value="46+">46+ aÃ±os</option>
              </select>
            </div>

            <div class="filter-group">
              <label>Con Instagram</label>
              <select id="filter-instagram" class="filter-select">
                <option value="">Todos</option>
                <option value="yes">SÃ­</option>
                <option value="no">No</option>
              </select>
            </div>

            <div class="filter-group">
              <label>Con Datos Extra</label>
              <select id="filter-extra" class="filter-select">
                <option value="">Todos</option>
                <option value="yes">SÃ­</option>
                <option value="no">No</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Filtros Avanzados -->
        <div id="advanced-filters" class="filters-panel">
          <div class="filters-grid-advanced">
            <div class="filter-group">
              <label>Departamento</label>
              <input type="text" id="filter-departamento" class="filter-input" placeholder="Ej: Lima">
            </div>

            <div class="filter-group">
              <label>Distrito</label>
              <input type="text" id="filter-distrito" class="filter-input" placeholder="Ej: Miraflores">
            </div>

            <div class="filter-group">
              <label>OcupaciÃ³n</label>
              <input type="text" id="filter-ocupacion" class="filter-input" placeholder="Ej: Ingeniero">
            </div>

            <div class="filter-group">
              <label>ETS</label>
              <select id="filter-ets" class="filter-select">
                <option value="">Todos</option>
                <option value="SÃ­">SÃ­</option>
                <option value="No">No</option>
                <option value="Desconocido">Desconocido</option>
              </select>
            </div>

            <div class="filter-group">
              <label>Edad MÃ­nima</label>
              <input type="number" id="filter-age-min" class="filter-input" placeholder="18" min="18" max="99">
            </div>

            <div class="filter-group">
              <label>Edad MÃ¡xima</label>
              <input type="number" id="filter-age-max" class="filter-input" placeholder="99" min="18" max="99">
            </div>

            <div class="filter-group">
              <label>Ordenar Por</label>
              <select id="filter-sort" class="filter-select">
                <option value="recent">MÃ¡s Recientes</option>
                <option value="oldest">MÃ¡s Antiguos</option>
                <option value="age-asc">Edad (Menor a Mayor)</option>
                <option value="age-desc">Edad (Mayor a Menor)</option>
                <option value="name-asc">Nombre (A-Z)</option>
                <option value="name-desc">Nombre (Z-A)</option>
                <option value="votes-desc">MÃ¡s Votados</option>
              </select>
            </div>

            <div class="filter-group">
              <label>Con Foto</label>
              <select id="filter-photo" class="filter-select">
                <option value="">Todos</option>
                <option value="yes">SÃ­</option>
                <option value="no">No</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Contador de resultados -->
        <div class="results-counter">
          <span id="results-count">0 resultados</span>
          <span id="active-filters-count" style="display: none;"></span>
        </div>
      </div>

      <div class="table-container">
        <!-- Mini filtros rÃ¡pidos -->
        <div class="quick-filters">
          <span class="quick-filters-label">Vista rÃ¡pida:</span>
          <div class="quick-filters-buttons">
            <button class="quick-filter-btn active" data-filter="recent" onclick="applyQuickFilter('recent')">
              <span class="filter-icon">ğŸ”¥</span>
              <span>Recientes</span>
            </button>
            <button class="quick-filter-btn" data-filter="popular" onclick="applyQuickFilter('popular')">
              <span class="filter-icon">â­</span>
              <span>Populares</span>
            </button>
            <button class="quick-filter-btn" data-filter="oldest" onclick="applyQuickFilter('oldest')">
              <span class="filter-icon">ğŸ“…</span>
              <span>Antiguos</span>
            </button>
            <button class="quick-filter-btn" data-filter="all" onclick="applyQuickFilter('all')">
              <span class="filter-icon">ğŸ“‹</span>
              <span>Todos</span>
            </button>
          </div>
        </div>

        <div class="table-wrapper">
          <table id="records-table" class="elegant-table">
            <thead>
              <tr>
                <th style="min-width: 80px;">Dato Inventado</th>
                <th data-sort="nombres" class="sortable" onclick="Filters.sortBy('nombres')"
                  style="cursor: pointer; min-width: 120px;" title="Click para ordenar">Dato Inventado</th>
                <th data-sort="apellidos" class="sortable" onclick="Filters.sortBy('apellidos')"
                  style="cursor: pointer; min-width: 120px;" title="Click para ordenar">Dato Inventado</th>Inventado
                <th data-sort="departamento" class="sortable" onclick="Filters.sortBy('departamento')"
                  style="cursor: pointer; min-width: 120px;" title="Click para ordenar">Dato Inventado</th>
                <th data-sort="distrito" class="sortable" onclick="Filters.sortBy('distrito')"
                  style="cursor: pointer; min-width: 120px;" title="Click para ordenar">Dato Inventado</th>
                <th data-sort="edad" class="sortable" onclick="Filters.sortBy('edad')"
                  style="cursor: pointer; min-width: 80px;" title="Click para ordenar">Dato Inventado</th>
                <th style="min-width: 100px;">Dato Inventado</th>
                <th style="min-width: 100px;">Dato Inventado</th>
                <th style="min-width: 100px;">Opiniones</th>
                <th style="min-width: 120px;">Ver todo el chisme</th>
              </tr>Inventado
            </thead>
            <tbody id="table-body">
              <tr class="empty-state">
                <td colspan="10">
                  <div class="empty-message">
                    <span class="empty-icon">ğŸ’”</span>
                    <p>No hay registros aÃºn</p>
                    <div
                      style="margin-top: 15px; padding: 15px; background: linear-gradient(135deg, rgba(255, 193, 7, 0.1), rgba(255, 152, 0, 0.05)); border-radius: 8px; border-left: 4px solid #ff9800;">
                      <p style="margin: 0; color: #e65100; font-size: 0.95rem; line-height: 1.6;">
                        â³ <strong>Â¿Por quÃ© no veo registros?</strong><br>
                        El servidor estÃ¡ procesando los datos. Debido al presupuesto limitado, puede tardar unos minutos
                        en cargar toda la informaciÃ³n.<br><br>
                        ğŸ’¡ <strong>Deja la pÃ¡gina abierta unos minutos y los registros aparecerÃ¡n
                          automÃ¡ticamente.</strong>
                      </p>
                    </div>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- PaginaciÃ³n -->
        <div class="pagination-container">
          <div class="pagination-info">
            <span id="pagination-info-text">Mostrando 0 de 0 registros</span>
          </div>
          <div class="pagination-controls">
            <button class="pagination-btn" id="btn-first-page" onclick="Pagination.goToPage(1)" title="Primera pÃ¡gina">
              â®ï¸
            </button>
            <button class="pagination-btn" id="btn-prev-page" onclick="Pagination.previousPage()"
              title="PÃ¡gina anterior">
              â—€ï¸
            </button>

            <div class="pagination-pages" id="pagination-pages">
              <!-- Los nÃºmeros de pÃ¡gina se generan dinÃ¡micamente -->
            </div>

            <button class="pagination-btn" id="btn-next-page" onclick="Pagination.nextPage()" title="PÃ¡gina siguiente">
              â–¶ï¸
            </button>
            <button class="pagination-btn" id="btn-last-page" onclick="Pagination.goToLastPage()" title="Ãšltima pÃ¡gina">
              â­ï¸
            </button>
          </div>
          <div class="pagination-size">
            <label for="page-size-select">Mostrar:</label>
            <select id="page-size-select" class="page-size-select" onchange="Pagination.changePageSize(this.value)">
              <option value="10">10</option>
              <option value="25" selected>25</option>
              <option value="50">50</option>
              <option value="100">100</option>
            </select>
            <span>por pÃ¡gina</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Sidebar derecho de publicidad -->
    <aside class="ads-sidebar right" id="ads-right">
      <!-- Los anuncios se cargan dinÃ¡micamente con JavaScript -->
    </aside>
  </main>

  <div id="modal-overlay" class="modal-overlay">
    <div id="modal-new-record" class="modal">
      <div class="modal-header">
        <h2>Nueva AnÃ©cdota AnÃ³nima</h2>
        <button class="modal-close" onclick="closeModal()">&times;</button>
      </div>
      <div class="modal-body">
        <!-- Aviso Legal y Responsabilidad -->
        <div
          style="background: #fff3cd; border-left: 4px solid #ff9800; padding: 15px; margin-bottom: 20px; border-radius: 8px;">
          <strong style="color: #e65100;">âš ï¸ IMPORTANTE - Responsabilidad del Usuario</strong>
          <p style="margin: 8px 0 0 0; color: #555; font-size: 0.9rem; line-height: 1.6;">
            â€¢ Este es un sitio de <strong>anÃ©cdotas anÃ³nimas</strong><br>
            â€¢ Eres <strong>responsable</strong> del contenido que publicas<br>
            â€¢ La plataforma NO verifica identidades ni datos<br>
            â€¢ Publica solo informaciÃ³n que desees compartir de forma anÃ³nima
          </p>
        </div>

        <form id="form-new-record">
          <div class="form-row">
            <div class="form-group">
              <label>Nombres (Solo para tu referencia - NO se muestra pÃºblicamente) *</label>
              <input type="text" name="nombres" required class="elegant-input" placeholder="Solo tÃº lo verÃ¡s">
            </div>
            <div class="form-group">
              <label>Apellidos (Solo para tu referencia - NO se muestra pÃºblicamente) *</label>
              <input type="text" name="apellidos" required class="elegant-input" placeholder="Solo tÃº lo verÃ¡s">
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>Foto de perfil (Recomendado: Pegar URL)
                <span class="info-icon" title="Pega un enlace de imagen o sube desde tu dispositivo">â„¹ï¸</span>
              </label>

              <!-- Tabs para elegir mÃ©todo -->
              <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                <button type="button" class="tab-btn active" id="tab-url" onclick="switchPhotoTab('url')">
                  ğŸ”— Pegar URL (Recomendado)
                </button>
                <button type="button" class="tab-btn" id="tab-upload" onclick="switchPhotoTab('upload')">
                  ğŸ“¤ Subir desde PC
                </button>
              </div>

              <!-- Contenedor para URL manual (PRINCIPAL) -->
              <div id="photo-url-container" style="display: block;">
                <input type="url" id="foto-url-input" class="elegant-input"
                  placeholder="https://i.imgur.com/ejemplo.jpg">
                <small class="form-hint" style="display: block; margin-top: 8px;">
                  âš¡ <strong>Ventaja:</strong> Con un enlace directo, tu imagen se verÃ¡ mÃ¡s rÃ¡pido y nunca se perderÃ¡.
                </small>
              </div>

              <!-- Contenedor para subir imagen (SECUNDARIO) -->
              <div id="photo-upload-container" style="display: none;">
                <div id="image-uploader-area"></div>
              </div>

              <!-- Input oculto que guardarÃ¡ la URL final -->
              <input type="hidden" name="foto" id="foto-final">
            </div>
            <div class="form-group">
              <label>Instagram/Red Social
                <span class="info-icon" title="Usuario o enlace de Instagram">â„¹ï¸</span>
              </label>
              <input type="text" name="instagram" class="elegant-input"
                placeholder="@usuario o https://instagram.com/usuario">
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>Departamento de la anÃ©cdota *</label>
              <input type="text" name="departamento" required class="elegant-input" placeholder="Ej: Lima">
            </div>
            <div class="form-group">
              <label>Distrito de la anÃ©cdota *</label>
              <input type="text" name="distrito" required class="elegant-input" placeholder="Ej: Miraflores">
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>Edad *</label>
              <input type="number" name="edad" required class="elegant-input" min="18" max="99">
            </div>
            <div class="form-group">
              <label>OcupaciÃ³n</label>
              <input type="text" name="ocupacion" class="elegant-input">
            </div>
          </div>
          <div class="form-group">
            <label>Â¿Posee ETS?</label>
            <select name="ets" class="elegant-select">
              <option value="No">No</option>
              <option value="SÃ­">SÃ­</option>
              <option value="Desconocido">Desconocido</option>
            </select>
          </div>
          <div class="form-group">
            <label>Tiempo de relaciÃ³n</label>
            <input type="text" name="tiempoRelacion" class="elegant-input" placeholder="Ej: 2 aÃ±os">
          </div>
          <div class="form-group">
            <label>Periodo de infidelidad</label>
            <input type="text" name="periodoInfidelidad" class="elegant-input" placeholder="Ej: Enero 2024">
          </div>

          <div class="form-group">
            <label>Datos adicionales (opcional)</label>
            <textarea name="datosAdicionales" class="elegant-textarea" rows="3"
              placeholder="InformaciÃ³n extra relevante sobre el caso..."></textarea>
          </div>

          <div class="form-group">
            <label>Enlaces de pruebas (separados por coma)
              <span class="info-icon" title="CÃ³mo subir imÃ¡genes">â„¹ï¸</span>
            </label>
            <textarea name="pruebas" class="elegant-textarea" rows="3"
              placeholder="https://ejemplo.com/imagen1.jpg, https://ejemplo.com/imagen2.jpg"></textarea>
            <small class="form-hint">
              ğŸ’¡ Sube tus capturas a <a href="https://imgur.com" target="_blank">imgur.com</a> o
              <a href="https://imgbb.com" target="_blank">imgbb.com</a>, copia el enlace directo y pÃ©galo aquÃ­
            </small>
          </div>

          <div class="form-group"
            style="background: rgba(248, 180, 217, 0.1); padding: 15px; border-radius: 8px; border: 2px solid var(--soft-pink);">
            <label style="display: flex; align-items: center; gap: 10px; cursor: pointer; font-weight: 600;">
              <input type="checkbox" name="allowFieldEdits" id="allowFieldEdits"
                style="width: 20px; height: 20px; cursor: pointer;">
              <span>Permitir propuestas de cambio de la comunidad</span>
              <span class="info-icon"
                title="Si activas esto, la comunidad podrÃ¡ proponer cambios a campos como ocupaciÃ³n, ETS, tiempo de relaciÃ³n, etc.">â„¹ï¸</span>
            </label>
            <small class="form-hint" style="margin-top: 8px; display: block;">
              ğŸ“Š Si activas esta opciÃ³n, la comunidad podrÃ¡ votar para modificar campos como ocupaciÃ³n, ETS, tiempo de
              relaciÃ³n y periodo de infidelidad. Por defecto estÃ¡ desactivado.
            </small>
          </div>

          <div class="form-group"
            style="background: rgba(255, 243, 205, 0.3); padding: 15px; border-radius: 8px; border: 2px solid #ffc107;">
            <label style="font-weight: 600; display: block; margin-bottom: 10px;">
              â±ï¸ Tiempo mÃ­nimo entre comentarios
              <span class="info-icon"
                title="Evita spam y comentarios repetitivos. Los usuarios solo podrÃ¡n comentar una vez cada X tiempo.">â„¹ï¸</span>
            </label>
            <select name="commentCooldown" id="commentCooldown" class="elegant-select">
              <option value="300000">5 minutos</option>
              <option value="900000">15 minutos</option>
              <option value="1800000">30 minutos</option>
              <option value="3600000" selected>1 hora (recomendado)</option>
              <option value="7200000">2 horas</option>
              <option value="21600000">6 horas</option>
              <option value="86400000">24 horas</option>
            </select>
            <small class="form-hint" style="margin-top: 8px; display: block;">
              ğŸ›¡ï¸ Esto evita que usuarios publiquen miles de comentarios al mismo tiempo. Recomendado: 1 hora.
            </small>
          </div>

          <div class="modal-actions">
            <button type="button" class="btn-secondary" onclick="closeModal()">Cancelar</button>
            <button type="submit" class="btn-primary">Registrar</button>
          </div>
        </form>
      </div>
    </div>

    <div id="modal-thread" class="modal modal-thread">
      <div class="modal-header">
        <h2 id="thread-title">Detalles del Caso</h2>
        <button class="modal-close" onclick="closeThreadModal()">&times;</button>
      </div>
      <div class="modal-body">
        <div id="thread-info" class="thread-info"></div>

        <!-- Balanza visual -->
        <div id="modal-vote-balance" class="vote-balance" style="margin: 20px 0;"></div>

        <div class="thread-votes">
          <button id="btn-approve" class="vote-btn vote-approve">
            <span class="vote-icon">âœ“</span>
            <span class="vote-label">Aprobar</span>
            <span id="approve-count" class="vote-count">0</span>
          </button>
          <button id="btn-reject" class="vote-btn vote-reject">
            <span class="vote-icon">âœ—</span>
            <span class="vote-label">Refutar</span>
            <span id="reject-count" class="vote-count">0</span>
          </button>
        </div>
        <div class="thread-comments">
          <h3>Comentarios y Pruebas Adicionales</h3>
          <div id="comments-list"></div>
          <form id="form-comment" class="comment-form">
            <textarea name="comment" class="elegant-textarea" rows="3" placeholder="Agregar comentario o refutaciÃ³n..."
              required></textarea>
            <input type="text" name="proofs" class="elegant-input"
              placeholder="Enlaces de pruebas adicionales (separados por coma)">
            <button type="submit" class="btn-primary">Publicar</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <script src="/js/config.js?v=6"></script>
  <script src="/js/geoblock.js?v=5"></script>
  <script src="/js/utils.js?v=6"></script>
  <script src="/js/fingerprint.js?v=5"></script>
  <script src="/js/anonymizer.js?v=5"></script>
  <script src="/js/indexeddb-storage.js?v=1"></script>
  <script src="/js/chunk-manager.js?v=1"></script>
  <script src="/js/tab-sync.js?v=6"></script>
  <script src="/js/p2p-simple.js?v=15"></script>
  <script src="/js/click-handler.js?v=6"></script>
  <script src="/js/algorithm.js?v=5"></script>
  <script src="/js/api.js?v=5"></script>
  <script src="/js/ui.js?v=5"></script>
  <script src="/js/imageUploader.js?v=5"></script>
  <script src="/js/anonymousNames.js?v=5"></script>
  <script src="/js/commentRateLimit.js?v=5"></script>
  <script src="/js/deduplicator.js?v=5"></script>
  <script src="/js/filters.js?v=5"></script>
  <script src="/js/pagination.js?v=5"></script>
  <script src="/js/admin.js?v=1"></script>
  <script src="/js/app.js?v=10"></script>

  <script>
    // GeoBlock se maneja en app.js ahora

    // FunciÃ³n para cambiar entre tabs de foto
    function switchPhotoTab(tab) {
      const uploadContainer = document.getElementById('photo-upload-container');
      const urlContainer = document.getElementById('photo-url-container');
      const tabUpload = document.getElementById('tab-upload');
      const tabUrl = document.getElementById('tab-url');
      const fotoUrlInput = document.getElementById('foto-url-input');

      // Ocultar todos
      uploadContainer.style.display = 'none';
      urlContainer.style.display = 'none';
      tabUpload.classList.remove('active');
      tabUrl.classList.remove('active');

      // Mostrar el seleccionado
      if (tab === 'upload') {
        uploadContainer.style.display = 'block';
        tabUpload.classList.add('active');
        fotoUrlInput.value = '';
      } else {
        // URL (por defecto)
        urlContainer.style.display = 'block';
        tabUrl.classList.add('active');
        const imageUrlResult = document.getElementById('image-url-result');
        if (imageUrlResult) imageUrlResult.value = '';
      }
    }

    // Inicializar el uploader cuando se abre el modal
    document.getElementById('btn-new-record').addEventListener('click', () => {
      setTimeout(() => {
        // Inicializar uploader solo una vez
        if (!document.getElementById('image-uploader-area').hasChildNodes()) {
          ImageUploader.createUploadInput('image-uploader-area', (url) => {
            document.getElementById('foto-final').value = url;
          });
        }
      }, 100);
    });

    // Sincronizar URL manual con input final
    document.addEventListener('DOMContentLoaded', () => {
      const fotoUrlInput = document.getElementById('foto-url-input');
      if (fotoUrlInput) {
        fotoUrlInput.addEventListener('input', (e) => {
          document.getElementById('foto-final').value = e.target.value;
        });
      }
    });
  </script>

  <!-- Sistema de publicidad -->
  <script src="/js/ads-config.js?v=3"></script>
  <script src="/js/ads.js?v=3"></script>

  <!-- Script del popup de migraciÃ³n -->
  <script>
    // Mostrar popup de migraciÃ³n al cargar la pÃ¡gina
    function showMigrationPopup() {
      const overlay = document.getElementById('migration-overlay');
      if (overlay) {
        // Verificar si el usuario ya cerrÃ³ el popup en esta sesiÃ³n
        const popupClosed = sessionStorage.getItem('migration-popup-closed');
        if (!popupClosed) {
          overlay.style.display = 'flex';
          document.body.style.overflow = 'hidden';
        }
      }
    }

    function closeMigrationPopup() {
      const overlay = document.getElementById('migration-overlay');
      if (overlay) {
        overlay.style.opacity = '0';
        setTimeout(() => {
          overlay.style.display = 'none';
          document.body.style.overflow = '';
        }, 300);
        // Guardar en sessionStorage para no mostrar de nuevo en esta sesiÃ³n
        sessionStorage.setItem('migration-popup-closed', 'true');
      }
    }

    // Mostrar popup despuÃ©s de que cargue el contenido
    window.addEventListener('load', () => {
      setTimeout(showMigrationPopup, 500);
    });

    // Cerrar con tecla ESC
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        closeMigrationPopup();
      }
    });

    // Cerrar al hacer click fuera del popup
    document.getElementById('migration-overlay')?.addEventListener('click', (e) => {
      if (e.target.id === 'migration-overlay') {
        closeMigrationPopup();
      }
    });
  </script>
</body>

</html>